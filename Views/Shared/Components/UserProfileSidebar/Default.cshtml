@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@model UserPortalValdiationsDBContext.ViewComponents.UserProfileSidebarViewModel

<div class="card mb-3">
    <div class="card-body text-center">
        <img src="@(Model.ProfilePhotoPath ?? "/images/default-profile.png")" class="rounded-circle mb-2" style="width:96px;height:96px;object-fit:cover;" />
        <h5 class="card-title">@Model.Name</h5>
        <p class="card-subtitle small">@Model.Email</p>

        <hr />

        <div class="text-start">
            <strong>Roles</strong>
            <p class="small">
                @if (Model.Roles?.Any() ?? false)
                {
                    <span class="badge bg-secondary">@string.Join(", ", Model.Roles)</span>
                }
                else
                {
                    <span class="text-muted small">No roles</span>
                }
            </p>

            <strong>Recent activity</strong>
            <ul class="list-unstyled small">
                @foreach (var d in Model.RecentLogins.Take(5))
                {
                    <li>@d.ToLocalTime().ToString("g")</li>
                }
            </ul>

            <strong>Last password change</strong>
            <p class="small">@((Model.LastPasswordChangeAt.HasValue) ? Model.LastPasswordChangeAt.Value.ToLocalTime().ToString("g") : "Never")</p>

            @if (Model.UpcomingBirthday != null)
            {
                <div class="alert alert-info small">
                    Birthday in <strong>@Model.UpcomingBirthday.DaysUntil</strong> days (@Model.UpcomingBirthday.Date.ToString("MMM d"))
                </div>
            }
        </div>
    </div>
</div>
