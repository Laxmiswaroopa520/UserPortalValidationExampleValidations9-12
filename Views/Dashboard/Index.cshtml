@model IEnumerable<UserPortalValdiationsDBContext.Models.User>

@{
    ViewBag.Title = "Dashboard";
}

<h2 class="mb-3">Users</h2>

<!-- VIEW COMPONENTS ADDED HERE -->
<div class="row mb-4">

    <div class="col-md-4">
        @await Component.InvokeAsync("UserProfileSidebar")
    </div>

    <div class="col-md-4">
        @await Component.InvokeAsync("UserCount")
    </div>

    <div class="col-md-4">
        @await Component.InvokeAsync("UpcomingBirthdays")
    </div>

</div>

<!-- ORIGINAL CODE BELOW — NOT REMOVED -->

<div class="mb-3 d-flex justify-content-between align-items-center">
    <a class="btn btn-success"
       asp-controller="Account" asp-action="Register">
        ➕ Add New User
    </a>

    <form asp-controller="Account" asp-action="Logout" method="post">
        <button type="submit" class="btn btn-danger">
            🔒 Logout
        </button>
    </form>
</div>

<table class="table table-striped table-bordered align-middle">
    <thead class="table-dark">
        <tr>
            <th>Id</th>
            <th>Username</th>
            <th>Email</th>
            <th>Age</th>
            <th>Phone</th>
            <th style="width: 270px;">Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var u in Model)
        {
            <tr>
                <td>@u.Id</td>
                <td>@u.Username</td>
                <td>@u.Email</td>
                <td>@u.Age</td>
                <td>@u.Phone</td>

                <td>
                    <a class="btn btn-sm btn-primary"
                       asp-action="Edit"
                       asp-route-id="@u.Id">
                        ✏️ Edit
                    </a>

                    <a class="btn btn-sm btn-info text-white"
                       asp-action="AddAddress"
                       asp-route-userId="@u.Id">
                        🏠 Add Address
                    </a>

                    <a class="btn btn-sm btn-secondary"
                       asp-action="UserAddresses"
                       asp-route-userId="@u.Id">
                        📋 View Addresses
                    </a>

                    <a class="btn btn-sm btn-danger"
                       href="javascript:void(0)"
                       onclick="showDelete('@Url.Action("Delete", "Dashboard", new { id = u.Id })')">
                        🗑 Delete
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>

@await Html.PartialAsync("_DeletePopup")

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
